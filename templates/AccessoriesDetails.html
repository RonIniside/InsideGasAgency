{% extends 'Customerinherit.html' %}
{% load static %}
{% block body %}
<style xmlns="http://www.w3.org/1999/html">
    body {
<!--      font-family: Arial, sans-serif;-->
      background-image: url(../image/cook6.jpg); /* Replace with the URL of your background image */
      background-size: cover;
    }
    .containertt {
      max-width: 600px;
      margin: 0 auto;
      padding: 20px;
      background-color: rgba(255, 255, 255, 0.8);
      border-radius: 10px;
    }
    h1 {
      text-align: center;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
    }
    th, td {
      padding: 10px;
      text-align: left;
      border-bottom: 1px solid #ccc;
    }
    th {
      background-color: #f2f2f2;
    }
    .confirmation-section {
      text-align: center;
    }
    .confirm-btn {
      background-color: #4CAF50;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
    }
  </style>
<body class="background">
    {% if messages %}
    {% for message in messages %}
   <div class="modal" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Success Message</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <strong>{{message}}</strong>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
    {% endfor %}
    {% endif %}
<div class="container mt-5" style="background-color: antiquewhite;border-radius: 25px;
}">
    <div class="row">
        <div class="col-7 my-5 ">
            <div id="carouselExampleControls" class="carousel slide mx-3" data-bs-ride="carousel">
                {%for i in data%}
      <div class="carousel-inner Access_carousel ">
        <div class="carousel-item active">
          <img src="{{i.Acess_image_cover}}" class="d-block w-100" alt="..." >
        </div>
        <div class="carousel-item">
          <img src="{{i.Acess_2ndimage}}" class="d-block w-100" alt="...">
        </div>
        <div class="carousel-item">
          <img src="{{i.Acess_3rdimage}}" class="d-block w-100" alt="...">
        </div>
      </div>
      <button class="carousel-control-prev  " type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>
    </div>
            </div>
        <div class="col-5 my-5 " style="line-height: 2;">
            <h2>{{i.Acess_title}}</h2>
            <p class="fs-3">{{i.Acess_Desc}}</p>
            <div>
                <button  class="btn btn-primary" id="minusBtn">-</button>
                <input type="number" class="text-center" id="quantityInput" name="Quantity" value="1" min="1" style="background-color: antiquewhite;">
                <button class="btn btn-primary" id="plusBtn">+</button>
            </div>
            <div>
                <label class="fs-4 mt-3 lh-3 fs-5" for="totalAmount" >Total Amount:</label>
                <input type="text" name="Price" class="border-0 fs-4" required pattern=".*" id="totalAmount" readonly style="background-color: antiquewhite;">
            </div>
            <h5 class="fs-4 my-3">Availability: In Stock</h5>
            <button type="button" class="btn btn-primary py-2 px-2 fs-5" data-bs-toggle="modal" data-bs-target="#exampleModal" onclick="updateInputBox()">
              Book Now
            </button>
        </div>
    </div>
</div>
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Confirmation</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="container">
                    <h1> Order Details</h1>
            <form action="AccessoriesOrder" method="post">
                {% csrf_token %}
                    <table>
                        {%for s in user%}
                      <tr>
                        <th>Connection No</th>
                        <td id="">{{s.Con_number}}</td> <!-- Replace with the actual order ID -->
                      </tr>
                      <tr>
                        <th>Customer Name</th>
                        <td>{{s.Con_name}}</td> <!-- Replace with the actual customer name -->
                      </tr>
                      <tr>
                        <th>Order Date</th>
                        <td>{{date}}</td> <!-- Replace with the actual order date -->
                      </tr>
                        <tr>
                        <th>Product</th>
                        <td id="refill_value">{{i.Acess_title}}</td> <!-- Replace with the actual order date -->
                      </tr>
                        <tr>
                        <th>Order Quantity</th>
                        <td><input type="text" class="border-0" name="Quantity" id="Quantity" readonly></td> <!-- Replace with the actual order total -->
                      </tr>
                      <tr>
                        <th>Order Total</th>
                        <td><input type="text" class="border-0" name="outputInput" id="outputInput" readonly></td> <!-- Replace with the actual order total -->
                      </tr>
                      <tr>
                        <th>Delivery Address</th>
                        <td>{{s.Con_Address}}</td> <!-- Replace with the actual delivery address -->
                      </tr>
                        <tr>
                            <th>Payment Type</th>
                            <td><input type="radio" class="ms-2" id="InputPaymentOption" value="Cash-on-Delivery" name="Payment_mode" required>Cash On Delivery</input>
                                <input type="radio" class="ms-2" id="InputPaymentOption" value="Online" name="Payment_mode" required>Online</input></td>
                        </tr>
                      <!-- Add more order details as needed -->
                    </table>

                <input type="text" name="Connection_no" value="{{s.Con_number}}" hidden>
                <input type="text" name="Cust_name" value="{{s.Con_name}}"hidden>
                <input type="text" name="date" value="{{date}}"hidden>
                <input type="text" name="Product" value="{{i.Acess_title}}"hidden>
                <input type="text" name="Address" value="{{s.Con_Address}}" hidden>
                <input type="text" name="product_id" value="{{i.Accessories_id}}" hidden>
                <input type="text" name="Phone" value="{{s.Con_phone}}" hidden>





                    <!-- Confirmation Section -->
                    <div class="confirmation-section">
                      <h2>Confirm Booking</h2>
                      <p>By clicking the button below, you confirm your booking.</p>
                    </div>
                  </div>
            </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-primary">Conform Booking</button>
      </div>
    </div>
  </div>
</div>
</body>
<script>
    // Initial values
    var quantityInput = document.getElementById('quantityInput');
    var totalAmountInput = document.getElementById('totalAmount'); // Change to input field
    var pricePerItem = {{i.Acess_price}}; // Replace with your actual price per item

    // Function to update the total amount
    function updateTotalAmount() {
        var quantity = parseInt(quantityInput.value);
        var totalAmount = quantity * pricePerItem;
        totalAmountInput.value = totalAmount; // Set the input field value
    }

    // Attach the function to the quantity input's "input" event
    quantityInput.addEventListener('input', updateTotalAmount);

    // Attach event listeners to plus and minus buttons
    document.getElementById('plusBtn').addEventListener('click', function() {
        quantityInput.value = parseInt(quantityInput.value) + 1;
        updateTotalAmount();
    });

    document.getElementById('minusBtn').addEventListener('click', function() {
        if (parseInt(quantityInput.value) > 1) {
            quantityInput.value = parseInt(quantityInput.value) - 1;
            updateTotalAmount();
        }
    });

    // Initialize the total amount on page load
    updateTotalAmount();
</script>
<script>
    function updateInputBox() {
      var inputValue = document.getElementById("totalAmount").value;
      var Quantity = document.getElementById("quantityInput").value;
      document.getElementById("Quantity").value = Quantity;
      document.getElementById("outputInput").value = inputValue;
    }
  </script>
       {%endfor%}
                {%endfor%}
{% endblock %}



