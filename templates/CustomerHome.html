<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    {% load static %}
    <meta charset="UTF-8">
    <title>Title</title>
  <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet"  href="{%static '/css/NewStyle.css'%}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Rubik&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Caprasimo&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="{% static 'fontawesomefree/css/fontawesome.css' %}" rel="stylesheet" type="text/css">
    <link href="{% static 'fontawesomefree/css/brands.css' %}" rel="stylesheet" type="text/css">
    <link href="{% static 'fontawesomefree/css/solid.css' %}" rel="stylesheet" type="text/css">
    <style>
<style xmlns="http://www.w3.org/1999/html">
    body {
<!--      font-family: Arial, sans-serif;-->
      background-image: url(../image/cook6.jpg); /* Replace with the URL of your background image */
      background-size: cover;
    }
    .containertt {
      max-width: 600px;
      margin: 0 auto;
      padding: 20px;
      background-color: rgba(255, 255, 255, 0.8);
      border-radius: 10px;
    }
    h1 {
      text-align: center;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
    }
    th, td {
      padding: 10px;
      text-align: left;
      border-bottom: 1px solid #ccc;
    }
    th {
      background-color: #f2f2f2;
    }
    .confirmation-section {
      text-align: center;
    }
    .confirm-btn {
      background-color: #4CAF50;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
    }
  </style>
    </style>
</head>
<body class="job_bg">
<nav class="navbar navbar-expand-lg bg-light-subtle h-auto ">
  <div class="container-fluid">
      <a class="navbar-brand fs-1 fw-bold ms-5" href="CustomerDashboard"><span class="logo"><i class="fas fa-sun "></i></span>Inside Gas</a>
   <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
       <div class="collapse navbar-collapse text-center " id="navbarNavDropdown">
      <ul class="navbar-nav ms-auto me-5 fs-5 ">
        <li class="nav-item px-3">
          <a class="nav-link active" aria-current="page" href="CustomerDashboard">Dashboard</a>
        </li>
               <li class="navbar-item1 dropdown px-1">
                  <a class="nav-link  dropdown-toggle" data-bs-toggle="dropdown" >Booking</a>
                   <ul class="dropdown-menu">
                       <li><a class="dropdown-item" href="BookCylinder">Book Cylinder</a></li>
                       <li><hr class="dropdown-divider"></li>
                        <li><a href="BookingDetails" class="dropdown-item">Booking Details</a> </li>
                   </ul>
              </li>
           <li class="navbar-item dropdown px-1">
                  <a class="nav-link dropdown-toggle"href=""  data-bs-toggle="dropdown">Accessories</a>
                     <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="ViewAccessories">Book Accessories</a></li>
                        <li><a class="dropdown-item" href="AcessoriesBookingDetails">Track Order</a></li>
                     </ul>
              </li>
               <li class="navbar-item dropdown px-1">
                  <a class="nav-link dropdown-toggle"href=""  data-bs-toggle="dropdown">Connections</a>
                     <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="ApplyForConnection">Apply For Connection</a></li>
                        <li><a class="dropdown-item" href="EditConnection">Edit Connection</a></li>
                     </ul>
              </li>
               <li class="navbar-item dropdown px-1 ">
                  <a class="nav-link dropdown-toggle"href=""  data-bs-toggle="dropdown"><i class="fa-solid fa-user-pen"></i></i></a>
                     <ul class="dropdown-menu"style=" margin-left: -39px;">
                        <li><a class="dropdown-item" href="">Edit Profile</a></li>
                        <li><a class="dropdown-item" href="out">logout</a></li>
                     </ul>
              </li>
          </ul>
      </div>
  </div>
</nav>
<div class="col-12 bg-danger">
    {%for i in details%}
    <h2 class=" py-2 text-white fw-bold ms-5">{{i.Con_name}} Dashboard</h2>
    {%endfor%}
</div>
    {% if messages %}
    {% for message in messages %}
   <div class="modal" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Success Message</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <strong>{{message}}</strong>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
    {% endfor %}
    {% endif %}
<button type="button" id="popup" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal" hidden>
                          PopUp button
                        </button>
        <div class="col-12" style="background-color:whitesmoke">
            {%for detail in details%}
        <h4 class="px-2 py-1 ms-5">Connection No: {{detail.Con_number|default:"-"}}</h4>
            <h4 class="d-inline-flex px-2 ms-5"><span class="fw-bold me-1">Name:</span> {{detail.Con_name|default:"-"}}</h4>
            <h4 class="d-inline-flex px-2 "><span class="fw-bold me-1">Address:</span> {{detail.Con_Address|default:"-"}}</h4>
            <h4 class="d-inline-flex px-2 "><span class="fw-bold me-1">District:</span> {{detail.Con_District|default:"-"}}</h4>
            <h4 class="d-inline-flex px-2 "><span class="fw-bold me-1">Location:</span> {{detail.Con_location|default:"-"}}</h4>
            <h4 class="d-inline-flex px-2 ms-5"><span class="fw-bold me-1">Type:</span> {{detail.Con_for|default:"-"}}</h4>
            <h4 class="d-inline-flex px-2 ms-5"><span class="fw-bold me-1">Phone:</span> {{detail.Con_phone|default:"-"}}</h4>
            <h4 class="d-inline-flex px-2 py-2 ms-5"><span class="fw-bold me-1">Email:</span> {{detail.Con_Email|default:"-"}}</h4>
        </div>


<hr class="hr-4  my-2 " />
    <div class="container-fluid d-inline-flex">
        <div class="col-3 ms-4 py-1 rounded-4 d-flex glass " >
            <div>
                <form action="QuickBookConformPopup" method="post">
                    {%csrf_token%}
                <h4 class="px-3 text-center  ">Quick Book</h4>
                <hr class="hr-4 my-2" />
                <h5 class="px-3 d-flex">Connection No:{{detail.Con_number}}</h5>
                <div class="d-inline-flex">
                    <h5 class="px-3 d-flex ">LPG Type:</h5>
                    <select id="mySelect" name="selectedOption" class="px-3 border-0 mb-2 glass" required >
                            <option value="" disabled selected>Select any Option</option>
                            {%for cylinder in Cylinder%}
                            <option value="{{cylinder.Quantity}}">{{cylinder.Quantity}}KG</option>
                            {%endfor%}
                            <!-- Add more options as needed -->
                    </select>
                    </div>
                    <div class="d-inline-flex">
                        <h5 class="px-3 d-flex ">Refill Amount:</h5>
                        <input type="text" id="result" name="refill_amount" class="border-0 px-3 mb-2 d-flex glass" value="0" readonly >
                    </div>
                <h5 class="px-3 d-flex">Date:{{date}}</h5>
                    <h5 class="px-3 d-flex">Payment:Cash-On-Delivery</h5>
                    <hr class="hr-4 my-2" />
                 <div class=" text-center">
                     <button type="submit" class="btn btn-primary ms-auto ">Book</button>
                 </div>
                </form>

                {%endfor%}

            </div>
        </div>

        <div class="col-4 ms-4 py-1 rounded-4 glass " >
            <div>
                <h4 class="px-3 text-center"> Cylinder Order Info</h4>
                <hr class="hr-4 my" />
                <div class="d-inline-flex">
                    <h5 class="px-3">Booking No:</h5>
                    <select id="Cylinfo"  class="px-3 border-0 mb-2 glass" required >
                        <option value="" disabled selected>Select any Option</option>
                        {%for info in Cyinfo%}
                        <option value="{{info.Booking_id}}">{{info.Booking_id}}</option>
                        {%endfor%}
                                <!-- Add more options as needed -->
                    </select>
                </div>
                   <div class="d-inline-flex">
                        <h5 class="px-3 d-flex ">Order Date:</h5>
                        <input type="text" id="cyOrderDate"  class="border-0 px-3 mb-2 d-flex glass" value="---" readonly >
                    </div>
                    <div class="d-inline-flex">
                        <h5 class="px-3 d-flex ">Cylinder:</h5>
                        <input type="text" id="cyOrderItem"  class="border-0 px-3 mb-2 d-flex glass" value="---KG" readonly >
                    </div>
                    <div class="d-inline-flex">
                        <h5 class="px-3 d-flex ">Status:</h5>
                        <input type="text" id="cyOrderStatus"  class="border-0 px-3 mb-2 d-flex glass" value="---" readonly >
                    </div>
                    <div class="d-inline-flex">
                        <h5 class="px-3 d-flex ">Amount:</h5>
                        <input type="text" id="cyOrderAmount" class="border-0 px-3 mb-2 d-flex glass" value="---" readonly >
                    </div>
                <hr class="hr-4 my-2" />
            </div>
        </div>

                        <div class="col-4 ms-4 py-1 rounded-4 glass" >
                    <h4 class="px-3 text-center"> Accessories Order Info</h4>
                    <hr class="hr-4 my" />
                    <div class="d-inline-flex">
                        <h5 class="px-3 d-flex ">Booking No:</h5>
                        <select id="Aces_selectedOption" name="Aces_selectedOption" class="px-3 border-0 mb-2 glass" required >
                                <option value="" disabled selected>Select any Option</option>
                                {%for A in Acess%}
                                <option value="{{A.Booking_id}}">{{A.Booking_id}}</option>
                                {%endfor%}
                                <!-- Add more options as needed -->
                        </select>
                    </div>
                    <div class="d-inline-flex">
                        <h5 class="px-3 d-flex ">Order Date:</h5>
                        <input type="text" id="OrderDate" name="Order_date" class="border-0 px-3 mb-2 d-flex glass py-1" value="---" readonly >
                    </div>
                    <div class="d-inline-flex">
                        <h5 class="px-3 d-flex ">Product:</h5>
                        <input type="text" id="OrderItem" name="Orderitem" class="border-0 px-3 mb-2 d-flex glass py-1" value="---" readonly >
                    </div>
                    <div class="d-inline-flex">
                        <h5 class="px-3 d-flex ">Status:</h5>
                        <input type="text" id="OrderStatus" name="OrderStatus" class="border-0 px-3 mb-2 d-flex glass py-1" value="---" readonly >
                    </div>
                    <div class="d-inline-flex">
                        <h5 class="px-3 d-flex ">Amount:</h5>
                        <input type="text" id="OrderAmount" name="OrderAmount" class="border-0 px-3 mb-2 d-flex glass py-1" value="---" readonly >
                    </div>
                    <hr class="hr-4 my-2" />

        </div>
</div>
<hr class="hr-4 my" />
<div class="container mx-auto ">
            <div class="row">
                <div class="col-3 mt-1 d-inline-flex rounded-3 px-4 mx-2 Dashboard_Quick_acss_width bg-danger ">
                    <a href="" class="Dashboard_Quick_acss mt-4 "><i class="fa-solid fa-bottle-droplet" style="color: #ffffff;"></i></a>
                    <a href="" class=" fs-4 my-4 text-center ms-4 text-decoration-none text-black  ">Total<br>Bookings<br>{{Totalbook}}</a>
                </div>
                <div class="col-3  mt-1 d-inline-flex rounded-3 px-4 mx-2 Dashboard_Quick_acss_width bg-danger">
                    <a href="" class="Dashboard_Quick_acss mt-4 "><i class="fa-solid fa-user" style="color: #ffffff;"></i></a>
                    <a href="" class=" fs-4 my-4 text-center ms-4 text-decoration-none text-black  ">Conformed<br>Bookings<br>{{Conformedorders}}</a>
                </div>
                <div class="col-3  mt-1 d-inline-flex rounded-3 px-4 mx-2 Dashboard_Quick_acss_width bg-danger">
                    <a href="" class="Dashboard_Quick_acss mt-4 "><i class="fa-solid fa-user" style="color: #ffffff;"></i></a>
                    <a href="" class=" fs-4 my-4 text-center ms-4 text-decoration-none text-black  ">On The Way<br>Bookings<br>{{ontheways}}</a>
                </div>
                <div class="col-3  mt-1 d-inline-flex rounded-3 px-4 mx-2 Dashboard_Quick_acss_width bg-danger">
                    <a href="" class="Dashboard_Quick_acss mt-4 "><i class="fa-solid fa-user" style="color: #ffffff;"></i></a>
                    <a href="" class=" fs-4 my-4 text-center ms-4 text-decoration-none text-black  ">Completed<br>Bookings<br>{{Delivered}}</a>
                </div>
            </div>
</div>
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">Conformation</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">

        <div class="container containertt">
                    <h1>Booking Details</h1>
            <form action="QuickBook" method="post">
                {% csrf_token %}
                    <table>
                        {%for i in User_data%}
                      <tr>
                        <th>Connection No</th>
                        <td id="">{{i.Con_number}}</td> <!-- Replace with the actual order ID -->
                      </tr>
                      <tr>
                        <th>Customer Name</th>
                        <td>{{i.Con_name}}</td> <!-- Replace with the actual customer name -->
                      </tr>
                      <tr>
                        <th>Order Date</th>
                        <td>{{date}}</td> <!-- Replace with the actual order date -->
                      </tr>
                        <tr>
                        <th>Refill Type</th>
                        <td id="refill_value">{{refill_type}}KG</td> <!-- Replace with the actual order date -->
                      </tr>
                      <tr>
                        <th>Order Total</th>
                        <td>Rs{{refill_Amount}}</td> <!-- Replace with the actual order total -->
                      </tr>
                      <tr>
                        <th>Delivery Address</th>
                        <td>{{i.Con_Address}}</td> <!-- Replace with the actual delivery address -->
                      </tr>
                        <tr>
                            <th>Payment Type</th>
                            <td>{{Payment_mode}}</td>
                        </tr>
                      <!-- Add more order details as needed -->
                    </table>
                <input type="text" name="refill_type" value="{{refill_type}}" hidden>
                <input type="text" name="refill_p" value="{{refill_Amount}}" hidden>
                <input type="text" name="refill_address" value="{{i.Con_Address}}" hidden>
                <input type="text" name="refill_name" value="{{i.Con_name}}" hidden>
                <input type="text" name="refill_connection_no" value="{{i.Con_number}}" hidden>


                        {%endfor%}

                    <!-- Confirmation Section -->
                    <div class="confirmation-section">
                      <h2>Confirm Booking</h2>
                      <p>By clicking the button below, you confirm your booking.</p>
                    </div>
                  </div>
            </div>
            <div class="modal-footer">
              <button type="submit" class="btn btn-success text-center">Conform Booking</button>
                </form>
                <form action="CustomerDashboard" method="get">
                <button type="submit" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
                    </form>
            </div>
          </div>
        </div>
      </div>
{% if check %}
<button type="button" id="myButton"  data-bs-toggle="modal" data-bs-target="#staticBackdrop" hidden>Click Me</button>
{% endif %}
<script>

document.addEventListener('DOMContentLoaded', function() {
    const select = document.getElementById('mySelect');
    const resultInput = document.getElementById('result');

    select.addEventListener('change', () => {
        const selectedValue = select.value;
        // Make a GET request to the server with the selected value
        fetch(`/fetch-data/?selected=${selectedValue}`)
            .then(response => response.json())
            .then(data => {
                if (data.length === 0) {
                    resultInput.value = '0'; // Set the input value to 0
                } else {
                    // Extract and display desired details (Price)
                    const details = data[0];
                    resultInput.value = details.Price;
                }
            });
    });
});

document.addEventListener('DOMContentLoaded', function() {
    const select = document.getElementById('Aces_selectedOption');
    const resultInput = document.getElementById('OrderAmount');
        const OrderDate = document.getElementById('OrderDate');
        const OrderItem = document.getElementById('OrderItem');
        const OrderStatus = document.getElementById('OrderStatus');

    select.addEventListener('change', () => {
        const selectedValue = select.value;
        // Make a GET request to the server with the selected value
        fetch(`/Accessories_data/?selected=${selectedValue}`)
            .then(response => response.json())
            .then(data => {
                if (data.length === 0) {
                    resultInput.value = '---';
                     OrderDate.value = '0';
                     OrderStatus.value = '0'// Set the input value to 0
                } else {
                    // Extract and display desired details (Price)
                    const details = data[0];
                    OrderDate.value = details.OrderDate;
                    OrderItem.value = details.Product_name;
                    OrderStatus.value = details.Status;
                    OrderAmount.value = details.price;
                }
            });
    });
});

document.addEventListener('DOMContentLoaded', function() {
    const select = document.getElementById('Cylinfo');
    const resultInput = document.getElementById('cyOrderAmount');
        const OrderDate = document.getElementById('cyOrderDate');
        const OrderItem = document.getElementById('cyOrderItem');
        const OrderStatus = document.getElementById('cyOrderStatus');

    select.addEventListener('change', () => {
        const selectedValue = select.value;
        // Make a GET request to the server with the selected value
        fetch(`/Cylinderinfo_data/?selected=${selectedValue}`)
            .then(response => response.json())
            .then(data => {
                if (data.length === 0) {
                    resultInput.value = '---';
                     OrderDate.value = '0';
                     OrderStatus.value = '0'// Set the input value to 0
                } else {
                    // Extract and display desired details (Price)
                    const details = data[0];
                    cyOrderDate.value = details.Booking_date;
                    cyOrderItem.value =  details.Quantity + '-KG';
                    cyOrderStatus.value = details.Status;
                    cyOrderAmount.value = details.Price;
                }
            });
    });
});
</script>
<script>
    {% if check %}
      document.addEventListener('DOMContentLoaded', function() {
        var myButton = document.getElementById('myButton');
        myButton.click(); // Simulate a button click
      });
    {% endif %}


  </script>
<script>
    {% if messages %}
      // Use JavaScript to trigger the button click
      document.addEventListener('DOMContentLoaded', function() {
        var myButton = document.getElementById('popup');
        popup.click(); // Simulate a button click
      });
    {% endif %}


  </script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script src="js/bootstrap.js"></script>
</body>
</html>